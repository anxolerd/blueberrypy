[tox]
envlist = py27,py33,py34,pypy

[base]
install_command = pip install --allow-external cdecimal --pre {opts} {packages}
deps = -rrequirements.txt
    nose
    nose-testconfig
    flexmock
    lazr.smtptest
    coverage
    openstack.nose-plugin

[testenv]
deps = {[base]deps}
changedir = {envdir}
commands = {envbindir}/nosetests --config={toxinidir}/setup.cfg --tc-file={toxinidir}/setup.cfg {envsitepackagesdir}/blueberrypy/tests/

[testenv:pypy]
deps = {[base]deps}
       psycopg2cffi

[testenv:py27]
deps = {[base]deps}
       cdecimal
       hiredis
       MarkupSafe
       psycopg2

[testenv:py33]
deps = {[base]deps}
       hiredis
       MarkupSafe
       psycopg2

[testenv:py34]
deps = {[base]deps}
       hiredis
       MarkupSafe
       psycopg2
